# 🚀 DeepSeek 集成和文件地址配置测试指南

## 新增功能

### 1. DeepSeek API 支持

- ✅ 添加了 DeepSeek API 翻译支持
- ✅ 支持自定义 API 端点
- ✅ 使用 deepseek-chat 模型

### 2. 文件地址配置

- ✅ 输入文件目录配置
- ✅ 文件匹配模式（支持 glob 语法）
- ✅ 递归搜索选项
- ✅ 批量翻译目录功能

## 🧪 测试步骤

### 步骤 1：编译和启动

```bash
cd /Users/lemon/Desktop/lemon-\ translate
npm run compile
```

在 VSCode 中按 `F5` 启动调试模式。

### 步骤 2：配置 DeepSeek API

1. **打开设置面板**

   - 按 `Ctrl+Shift+P`（或 `Cmd+Shift+P`）
   - 输入 "AI 翻译: 打开设置"

2. **配置 DeepSeek**
   - 选择 "DeepSeek" 作为 API 提供商
   - 输入 DeepSeek API 密钥
   - 配置 API 端点（可选，默认为 https://api.deepseek.com/v1/chat/completions）

### 步骤 3：配置文件地址

1. **在设置面板中找到"文件配置"部分**
2. **配置以下选项：**
   - **输入文件目录**: `./`（当前目录）
   - **文件匹配模式**: `**/*.md`（所有 Markdown 文件）
   - **递归搜索**: ✅ 启用

### 步骤 4：测试翻译功能

#### 方法 1：翻译单个文件

1. 打开 `example.md` 文件
2. 右键选择 "AI 翻译: 翻译整个文件"
3. 查看翻译结果

#### 方法 2：翻译选中内容

1. 在 `example.md` 中选中一段中文文本
2. 右键选择 "AI 翻译: 翻译选中内容"
3. 查看选中文本是否被翻译

#### 方法 3：批量翻译目录

1. 按 `Ctrl+Shift+P` 打开命令面板
2. 输入 "AI 翻译: 批量翻译目录"
3. 确认翻译文件列表
4. 开始批量翻译

## 🔧 DeepSeek API 配置

### 获取 DeepSeek API 密钥

1. 访问 [DeepSeek 官网](https://platform.deepseek.com/)
2. 注册账号并登录
3. 在 API 管理页面创建 API 密钥
4. 复制 API 密钥到插件设置中

### API 端点配置

- **默认端点**: `https://api.deepseek.com/v1/chat/completions`
- **自定义端点**: 如果使用代理或自建服务，可以配置自定义端点

## 📁 文件地址配置说明

### 输入文件目录

- **相对路径**: `./`（当前工作目录）
- **绝对路径**: `/path/to/your/files`
- **支持变量**: `${workspaceFolder}`（工作区根目录）

### 文件匹配模式（Glob 语法）

- `*.md` - 当前目录下的所有.md 文件
- `**/*.md` - 所有子目录中的.md 文件
- `docs/**/*.md` - docs 目录及其子目录中的.md 文件
- `**/*.{md,txt}` - 所有.md 和.txt 文件

### 递归搜索

- ✅ **启用**: 搜索所有子目录
- ❌ **禁用**: 只搜索指定目录

## 🎯 测试检查清单

### DeepSeek 集成测试

- [ ] DeepSeek 选项出现在 API 提供商列表中
- [ ] 能够配置 DeepSeek API 密钥
- [ ] 能够配置自定义 API 端点
- [ ] 翻译功能使用 DeepSeek API
- [ ] 翻译结果质量良好

### 文件地址配置测试

- [ ] 能够配置输入文件目录
- [ ] 能够配置文件匹配模式
- [ ] 能够切换递归搜索选项
- [ ] 设置能够保存和加载
- [ ] 批量翻译功能正常工作

### 批量翻译测试

- [ ] 能够找到匹配的文件
- [ ] 显示文件数量确认对话框
- [ ] 批量翻译进度显示正常
- [ ] 所有文件都被正确翻译
- [ ] 翻译文件保存到正确位置

## 🐛 常见问题解决

### DeepSeek API 问题

**问题**: API 连接失败
**解决方案**:

- 检查 API 密钥是否正确
- 验证网络连接
- 确认 API 端点配置正确
- 检查 API 额度是否充足

**问题**: 翻译质量不佳
**解决方案**:

- 调整 temperature 参数（当前为 0.3）
- 优化 prompt 提示词
- 检查原文格式是否正确

### 文件地址配置问题

**问题**: 找不到文件
**解决方案**:

- 检查输入目录路径是否正确
- 验证文件匹配模式语法
- 确认文件确实存在
- 检查权限设置

**问题**: 批量翻译失败
**解决方案**:

- 检查文件数量限制（当前为 100 个）
- 验证文件格式是否支持
- 查看错误日志信息

## 📊 性能测试

### 测试不同文件数量

1. 创建不同数量的测试文件
2. 测试批量翻译性能
3. 观察内存使用情况
4. 检查翻译质量

### 测试不同文件大小

1. 创建不同大小的 Markdown 文件
2. 测试翻译速度和准确性
3. 观察 API 调用频率
4. 优化批量处理策略

## 🎉 功能验证

完成所有测试后，你应该能够：

1. **使用 DeepSeek 进行高质量翻译**
2. **灵活配置文件搜索路径和模式**
3. **批量处理大量文件**
4. **自定义 API 端点和参数**
5. **获得良好的用户体验**

## 📝 测试报告模板

```
测试日期: ____
DeepSeek API: ✅/❌
文件地址配置: ✅/❌
批量翻译功能: ✅/❌
翻译质量: 优秀/良好/一般/差
发现问题: ____
建议改进: ____
```

现在你可以开始测试这些新功能了！
