# AI 翻译插件测试指南

## 🚀 快速开始测试

### 1. 编译和启动插件

```bash
# 确保在项目根目录
cd /Users/lemon/Desktop/lemon-\ translate

# 编译项目
npm run compile

# 或者使用VSCode的调试功能
# 按 F5 键启动调试模式
```

### 2. 启动调试模式

1. 在 VSCode 中打开项目文件夹
2. 按 `F5` 键或点击"运行和调试"面板中的"运行扩展"
3. 这会打开一个新的 VSCode 窗口（扩展开发主机）
4. 在新窗口中，插件已经加载并可以使用

## 📋 测试步骤

### 步骤 1：配置 API 设置

1. 在扩展开发主机窗口中，按 `Ctrl+Shift+P`（或 `Cmd+Shift+P`）
2. 输入 "AI 翻译: 打开设置"
3. 在设置面板中配置：
   - **API 提供商**：选择 "OpenAI"（或其他可用服务）
   - **API 密钥**：输入你的 API 密钥
   - **目标语言**：选择 "English (英语)"
   - **输出目录**：保持默认 "./translated"

### 步骤 2：测试翻译功能

#### 方法 1：翻译整个文件

1. 在扩展开发主机窗口中打开 `example.md` 文件
2. 在资源管理器中右键点击 `example.md`
3. 选择 "AI 翻译: 翻译整个文件"
4. 等待翻译完成
5. 查看生成的翻译文件

#### 方法 2：翻译选中内容

1. 在 `example.md` 文件中选中一段中文文本
2. 右键选择 "AI 翻译: 翻译选中内容"
3. 查看选中文本是否被翻译

#### 方法 3：使用命令面板

1. 打开任意 Markdown 文件
2. 按 `Ctrl+Shift+P` 打开命令面板
3. 输入 "AI 翻译" 查看所有可用命令
4. 选择相应命令执行

### 步骤 3：验证翻译结果

1. 检查翻译文件是否在 `./translated/` 目录中生成
2. 文件名格式应为：`example_en.md`
3. 打开翻译文件，验证：
   - 格式是否保持正确
   - 内容是否翻译为英文
   - 代码块是否保持原样（如果设置了不翻译代码块）

## 🔧 测试不同配置

### 测试不同语言

1. 在设置面板中选择不同目标语言
2. 重新翻译文件
3. 验证翻译结果

### 测试不同 API 服务

1. 配置不同的 API 提供商
2. 测试翻译功能
3. 比较翻译质量

### 测试批量翻译

1. 调整批量翻译大小（1-20）
2. 翻译大文件
3. 观察进度显示

## 🐛 调试和故障排除

### 查看调试信息

1. 在原始 VSCode 窗口中查看"调试控制台"
2. 查看插件输出的日志信息
3. 检查是否有错误信息

### 常见问题解决

#### 问题 1：插件未激活

**解决方案：**

- 确保在扩展开发主机窗口中测试
- 检查 `package.json` 中的 `activationEvents` 配置
- 重新编译项目：`npm run compile`

#### 问题 2：API 连接失败

**解决方案：**

- 检查 API 密钥是否正确
- 验证网络连接
- 确认 API 服务是否可用
- 查看控制台错误信息

#### 问题 3：翻译结果格式错误

**解决方案：**

- 检查"保持 Markdown 格式"选项是否启用
- 验证原文格式是否正确
- 尝试调整批量翻译大小

#### 问题 4：设置面板无法打开

**解决方案：**

- 确保 Webview 相关代码正确编译
- 检查 VSCode 版本是否兼容
- 重新加载窗口：`Ctrl+Shift+P` > "Developer: Reload Window"

## 📊 测试检查清单

### 基础功能测试

- [ ] 插件能够正常激活
- [ ] 设置面板能够打开
- [ ] API 配置能够保存
- [ ] 命令面板中显示所有命令
- [ ] 右键菜单显示翻译选项

### 翻译功能测试

- [ ] 能够翻译整个文件
- [ ] 能够翻译选中内容
- [ ] 翻译结果格式正确
- [ ] 支持多种语言翻译
- [ ] 批量翻译功能正常
- [ ] 进度显示正常

### 配置测试

- [ ] 能够切换不同 API 服务
- [ ] 能够修改目标语言
- [ ] 能够调整输出目录
- [ ] 能够修改批量大小
- [ ] 设置能够持久化保存

### 错误处理测试

- [ ] API 密钥错误时显示友好提示
- [ ] 网络错误时显示错误信息
- [ ] 文件格式错误时给出建议
- [ ] 取消翻译时正确处理

## 🎯 性能测试

### 测试大文件翻译

1. 创建一个包含大量内容的 Markdown 文件
2. 测试翻译性能
3. 观察内存使用情况
4. 检查翻译质量

### 测试批量处理

1. 同时翻译多个文件
2. 观察系统资源使用
3. 检查是否有内存泄漏

## 📝 测试报告模板

```
测试日期：____
测试环境：VSCode版本 ____，Node.js版本 ____
API服务：____
测试语言：____

功能测试结果：
- 插件激活：✅/❌
- 设置面板：✅/❌
- 文件翻译：✅/❌
- 选中翻译：✅/❌
- 多语言支持：✅/❌
- 错误处理：✅/❌

发现问题：
1. ____
2. ____

建议改进：
1. ____
2. ____
```

## 🚀 发布前最终测试

1. **完整功能测试**：确保所有功能正常工作
2. **性能测试**：测试大文件和批量处理
3. **兼容性测试**：在不同 VSCode 版本中测试
4. **用户体验测试**：确保界面友好易用
5. **错误处理测试**：确保错误情况得到妥善处理

完成这些测试后，你的插件就可以准备发布了！
